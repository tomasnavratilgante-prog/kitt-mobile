export function parseIntent(utterance){const u=(utterance||'').toLowerCase(); if(u.includes('ahoj kitte')||u.includes('ahoj kitt')) return {type:'Greet'}; if(u.startsWith('přidej spolujezdce')||u.startsWith('přidej:')||u.startsWith('přidej ')){const parts=utterance.split(':');const name=(parts[1]||parts[0].replace(/přidej spolujezdce/i,'')).trim();return {type:'AddPassenger',name:name||'Neznámý'};} if(u.startsWith('pravidlo')||u.startsWith('pravidlo:')||u.startsWith('pravidla')){const raw=utterance.replace(/^pravidlo:?/i,'').trim();return {type:'AddRule',raw};} if(u.includes('seznam pravidel')||u.includes('jaká pravidla')) return {type:'ListRules'}; if(u.includes('jedeme do')){const dest=utterance.split(/jedeme do/i)[1]?.trim();return {type:'NavigateTo',destination:dest||''};} if(u.includes('pusť')||u.includes('zahraj')||u.includes('pust')){const q=utterance.replace(/.*(pusť|zahraj|pust).*?/i,'').trim();return {type:'PlayMusic',query:q||undefined};} return {type:'AskFact',topic:utterance};}